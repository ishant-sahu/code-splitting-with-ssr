{"version":3,"sources":["../source/devtools.js"],"names":["devtools","parameters","chunks","style_url","styles","entry","common_style_url","common","get_style_link_element_script","url","script","fade_duration","smokeScreen","hideSmokeScreen","hideSmokeScreenAfter","delay"],"mappings":";;;;;kBAuBwBA,Q;AAvBxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,QAAT,CAAkBC,UAAlB,EACf;AACC,KAAMC,SAASD,WAAWC,MAAX,EAAf;;AAEA,KAAMC,YAAmBD,OAAOE,MAAP,CAAcH,WAAWI,KAAzB,CAAzB;AACA,KAAMC,mBAAmBJ,OAAOE,MAAP,CAAcG,MAAvC;;AAEA,KAAMC,gCAAgC,SAAhCA,6BAAgC;AAAA,2EAAsEC,GAAtE;AAAA,EAAtC;;AAEA,KAAMC,+WAYFP,YAAmB,yBAAyBK,8BAA8BL,SAA9B,CAA5C,GAAuF,EAZrF,kBAaFG,mBAAmB,yBAAyBE,8BAA8BF,gBAA9B,CAA5C,GAA8F,EAb5F,6YAAN;;AA2BA,QAAOI,MAAP;AACA;;AAED;AACA;;AAEA,IAAMC,gBAAgB,GAAtB;;AAEO,IAAMC,sSAYYD,aAZZ,oCAAN;;AAiBA,IAAME,icAO8FF,aAP9F,cAAN;;AAWA,IAAMG,sDAAuB,SAAvBA,oBAAuB;AAAA,KAACC,KAAD,uEAAS,CAAT;AAAA,6eAc/BJ,aAd+B,uBAgBhCI,KAhBgC;AAAA,CAA7B","file":"devtools.js","sourcesContent":["// This is for `extract-text-webpack-plugin` only.\r\n//\r\n// The following code is an advanced topic\r\n// and can be skipped safely.\r\n// This code is not required\r\n// for the whole thing to work.\r\n// It's gonna work fine without this code.\r\n//\r\n// (in development mode)\r\n//\r\n// Removing the now unnecessary `<link rel=\"stylesheet\"/>` tag,\r\n// because the client-side javascript has already kicked-in\r\n// and added all the styles using `style-loader` dynamically.\r\n//\r\n// Should that stylesheet be removed at all?\r\n// Not necessarily.\r\n// It's just, for example, if a developer opens the page,\r\n// then decides to remove some CSS class,\r\n// and switches back to the browser,\r\n// and the CSS class is still there,\r\n// because it was only removed from dynamically added CSS styles,\r\n// not the statically added ones on the server-side.\r\n//\r\nexport default function devtools(parameters)\r\n{\r\n\tconst chunks = parameters.chunks()\r\n\r\n\tconst style_url        = chunks.styles[parameters.entry]\r\n\tconst common_style_url = chunks.styles.common\r\n\r\n\tconst get_style_link_element_script = url => `document.querySelector('head > link[rel=\"stylesheet\"][href=\"${url}\"]')`\r\n\r\n\tconst script =\r\n\t`\r\n\t\tdocument.addEventListener('DOMContentLoaded', function(event)\r\n\t\t{\r\n\t\t\t// The style-loader has already added <link/>s\r\n\t\t\t// to its dynamic hot-reloadable styles,\r\n\t\t\t// so remove the <link/> to the static CSS bundle\r\n\t\t\t// inserted during server side page rendering.\r\n\r\n\t\t\tvar stylesheet\r\n\t\t\tvar common_stylesheet\r\n\r\n\t\t\t${style_url        ? 'stylesheet        = ' + get_style_link_element_script(style_url) : ''}\r\n\t\t\t${common_style_url ? 'common_stylesheet = ' + get_style_link_element_script(common_style_url) : ''}\r\n\r\n\t\t\t// Waits a \"magical\" time amount of one second\r\n\t\t\t// for the dynamically added stylesheets\r\n\t\t\t// to be parsed and applied to the page.\r\n\t\t\tsetTimeout(function()\r\n\t\t\t{\r\n\t\t\t\tstylesheet        && stylesheet.parentNode.removeChild(stylesheet)\r\n\t\t\t\tcommon_stylesheet && common_stylesheet.parentNode.removeChild(common_stylesheet)\r\n\t\t\t},\r\n\t\t\t1000)\r\n\t\t})\r\n\t`\r\n\r\n\treturn script\r\n}\r\n\r\n// Smoke screen is for `mini-css-extract-plugin`.\r\n// Because prepending `style-loader` trick doesn't work for it.\r\n\r\nconst fade_duration = 150\r\n\r\nexport const smokeScreen = `\r\n\t<div\r\n\t\tid=\"universal-webpack-smoke-screen\"\r\n\t\tstyle=\"\r\n\t\t\tposition: fixed;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\ttop: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tz-index: 2147483647;\r\n\t\t\tbackground: white;\r\n\t\t\topacity: 1;\r\n\t\t\ttransition: opacity ${fade_duration}ms ease-out\r\n\t\t\">\r\n\t</div>\r\n`\r\n\r\nexport const hideSmokeScreen = `\r\n\tdocument.addEventListener('DOMContentLoaded', function(event)\r\n\t{\r\n\t\t// The style-loader has already added <link/>s\r\n\t\t// to its dynamic hot-reloadable styles,\r\n\t\t// so remove the white screen.\r\n\t\tdocument.getElementById('universal-webpack-smoke-screen').style.opacity = 0\r\n\t\tsetTimeout(() => document.body.removeChild(document.getElementById('universal-webpack-smoke-screen')), ${fade_duration})\r\n\t})\r\n`\r\n\r\nexport const hideSmokeScreenAfter = (delay = 0) => `\r\n\tdocument.addEventListener('DOMContentLoaded', function(event)\r\n\t{\r\n\t\tsetTimeout(function()\r\n\t\t{\r\n\t\t\t// The style-loader has already added <link/>s\r\n\t\t\t// to its dynamic hot-reloadable styles,\r\n\t\t\t// so remove the white screen.\r\n\r\n\t\t\tdocument.getElementById('universal-webpack-smoke-screen').style.opacity = 0\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tdocument.body.removeChild(document.getElementById('universal-webpack-smoke-screen'))\r\n\t\t\t},\r\n\t\t\t${fade_duration})\r\n\t\t},\r\n\t\t${delay})\r\n\t})\r\n`"]}